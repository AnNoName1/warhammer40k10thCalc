Warhammer 40k 10th Calc API
version		1.0
Server for calculating statistics based on Warhammer 40k 10th Edition rules. 
The code follows the [Standard Go Project Layout](https://github.com/golang-standards/project-layout). see readme_structure.md.
There are handlers used to handle rest api calls - see app.go
The project uses swagger to autogenerate openapi standard documentation(see main.go, pkg/handler/damage_handler.go).
The project uses autogenerated licensing code.
Middleware is used via http.NewServeMux(), it allows for logging. All requests are automatically assigned a UUID by the LoggingMiddleware(see internal/middleware)
There are unit tests for calculator helpers, integrational for handler(s). See internal/calculator, internal/middleware
Profiling is done via  pprof. See internal/app.app.go


to build:                     go build cmd/WarhammerCalcServer/main.go
to test:                      go test -v -race -cover ./...
to add license:               addlicense -c "Olbutov Aleksandr" -l mit .   
to format swag comments:      swag fmt 
to run swag autogen comments: swag init -g cmd\WarhammerCalcServer\main.go


curl for linux:
curl -X POST http://localhost:8080/api/damage/calculate \
-H "Content-Type: application/json" \
-d '{
    "num_models": 5,
    "attacks_string": "2",
    "bs": 3,
    "s": 4,
    "ap": 1,
    "d": "1",
    "t": 4,
    "save": 3,
    "hit_reroll": "none",
    "wound_reroll": "none",
    "target_wounds_per_model": 2
}'

pprof profiling:
terminal 1:
go tool pprof http://localhost:8080/debug/pprof/profile?seconds=30
terminal 2(Bash script for pprof testing:):
for i in {1..500}; do
  curl -s -X POST http://localhost:8080/api/damage/calculate \
  -H "Content-Type: application/json" \
  -d '{
      "num_models": 5,
      "attacks_string": "2",
      "bs": 3,
      "s": 4,
      "ap": 1,
      "d": "1",
      "t": 4,
      "save": 3,
      "hit_reroll": "none",
      "wound_reroll": "none",
      "target_wounds_per_model": 2
  }' > /dev/null